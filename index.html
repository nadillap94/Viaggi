<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vienna Imperiale - Guida Interattiva Modulare</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        /* DESIGN SYSTEM IMPERIALE */
        :root {
            --color-primary: #8C0000; /* Bordeaux Scuro (rich red) */
            --color-secondary: #C8AA50; /* Oro Antico (muted gold) */
            --color-background: #FAF8F4; /* Crema/Bianco Sporco */
            --color-text: #2c2c2c;
            --color-nav-bg: #4A4A4A; /* Grigio scuro per la navbar */
        }

        body {
            font-family: 'Georgia', serif;
            background-color: var(--color-background);
            color: var(--color-text);
        }

        /* HEADER & NAV BAR */
        .header-bg {
            background-color: var(--color-primary);
            color: white;
            border-bottom: 6px solid var(--color-secondary);
        }
        .nav-bg {
            background-color: var(--color-nav-bg); 
        }
        .nav-button {
            transition: all 0.2s;
            flex-shrink: 0; 
        }
        .nav-button:hover {
            background-color: #6C0000;
        }
        .active-tab { 
            background-color: var(--color-primary);
            font-weight: bold;
            border-bottom: 3px solid var(--color-secondary);
        }
        .intro-accent {
            color: var(--color-secondary); 
            font-weight: bold; 
        }

        /* VISUALIZZAZIONE TIMELINE */
        .accent-color { color: var(--color-primary); }
        .border-accent { border-color: var(--color-secondary); }
        .timeline-item { border-left: 2px solid var(--color-secondary); }
        .timeline-point {
            background-color: var(--color-primary);
            border: 4px solid var(--color-secondary);
        }
        .details-btn { background-color: var(--color-primary); }
        .details-btn:hover { background-color: #6C0000; }

        /* VETRINE CIBO */
        .food-showcase {
            background-color: white;
            border-top: 5px solid var(--color-primary);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        /* SEZIONI PAGINA */
        .tab-content {
            display: none; 
            min-height: 85vh; 
        }
        
        /* OTTIMIZZAZIONE PER LA STAMPA (PDF) */
        @media print {
            body { background-color: white !important; color: black !important; font-size: 10pt; }
            .fixed-element, .no-print { display: none !important; }
            .header-bg {
                background-color: white !important; color: black !important;
                border-bottom: 1px solid black !important;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            .timeline-item { border-left: 1px dashed gray; }
            .timeline-point { background-color: white !important; border-color: black !important; }
            
            .tab-content { display: block !important; } 
            .hidden { display: block !important; } 
            
            #page-PANORAMICA, #page-GIORNO1, #page-GIORNO2, #page-GIORNO3, #page-GIORNO4, #page-CIBO, #page-BUDGET {
                 page-break-after: always; 
            }
            #page-BUDGET { page-break-after: avoid; }
        }
    </style>
</head>
<body onload="showPage('page-PANORAMICA')">

    <header class="header-bg shadow-lg fixed top-0 w-full z-50 h-12 md:h-14 fixed-element">
        <div class="max-w-6xl mx-auto px-4 py-2 md:py-3">
            <h1 class="text-lg md:text-xl font-extrabold tracking-wider text-center pt-0.5">GUIDA VIENNA: L'EFFICACIA IMPERIALE</h1>
        </div>
    </header>

    <nav class="nav-bg fixed top-12 md:top-14 w-full z-40 shadow-xl h-10 fixed-element">
        <div class="max-w-6xl mx-auto px-4">
            <div class="flex overflow-x-auto whitespace-nowrap justify-start md:justify-center gap-1 text-sm md:text-base pt-1">
                <button onclick="showPage('page-PANORAMICA')" class="nav-button px-3 py-0.5 text-white" data-page="page-PANORAMICA">PANORAMICA</button>
                <button onclick="showPage('page-GIORNO1')" class="nav-button px-3 py-0.5 text-white" data-page="page-GIORNO1">GIORNO 1: VENERD√å 5</button>
                <button onclick="showPage('page-GIORNO2')" class="nav-button px-3 py-0.5 text-white" data-page="page-GIORNO2">GIORNO 2: SABATO 6</button>
                <button onclick="showPage('page-GIORNO3')" class="nav-button px-3 py-0.5 text-white" data-page="page-GIORNO3">GIORNO 3: DOMENICA 7</button>
                <button onclick="showPage('page-GIORNO4')" class="nav-button px-3 py-0.5 text-white" data-page="page-GIORNO4">GIORNO 4: LUNED√å 8</button>
                <button onclick="showPage('page-CIBO')" class="nav-button px-3 py-0.5 text-white" data-page="page-CIBO">CIBO</button>
                <button onclick="showPage('page-BUDGET')" class="nav-button px-3 py-0.5 text-white" data-page="page-BUDGET">BUDGET E STATISTICHE</button>
            </div>
        </div>
    </nav>

    <main class="max-w-6xl mx-auto p-4 sm:p-6 lg:p-8 pt-[88px] md:pt-24">

        <section id="page-PANORAMICA" class="tab-content">
            <h2 class="text-3xl font-bold mb-6 pb-2 border-b border-accent accent-color flex items-center">
                <i data-lucide="scan" class="mr-2 text-2xl"></i> Panoramica Veloce: L'Essenza del Viaggio
            </h2>
            <div id="summary-container" class="space-y-6">
                <p class="text-lg italic text-gray-700">Caricamento itinerario sintetico...</p>
            </div>
        </section>

        <section id="page-GIORNO1" class="tab-content">
            <h2 class="text-3xl font-bold mb-8 pb-2 border-b border-accent accent-color flex items-center">
                <i data-lucide="calendar-check" class="mr-2 text-2xl"></i> Giorno 1: Venerd√¨ 5 - Arrivo, Arte & Concerto
            </h2>
            <p class="text-lg mb-6 bg-white p-4 rounded-lg shadow-md border-l-4 border-accent">
                <span class="intro-accent">Intro:</span> Il focus √® sull'arrivo a Vienna, l'immersione nell'arte (Hundertwasser e Hofburg) e l'esperienza del primo mercatino serale.
            </p>
            <div id="timeline-GIORNO1" class="relative mt-4"></div>
        </section>

        <section id="page-GIORNO2" class="tab-content">
            <h2 class="text-3xl font-bold mb-8 pb-2 border-b border-accent accent-color flex items-center">
                <i data-lucide="calendar-check" class="mr-2 text-2xl"></i> Giorno 2: Sabato 6 - Grand Tour di Sfarzo
            </h2>
            <p class="text-lg mb-6 bg-white p-4 rounded-lg shadow-md border-l-4 border-accent">
                <span class="intro-accent">Intro:</span> Giorno dedicato alle due principali residenze imperiali (Sch√∂nbrunn e Belvedere) e ai mercatini pi√π maestosi.
            </p>
            <div id="timeline-GIORNO2" class="relative mt-4"></div>
        </section>
        
        <section id="page-GIORNO3" class="tab-content">
            <h2 class="text-3xl font-bold mb-8 pb-2 border-b border-accent accent-color flex items-center">
                <i data-lucide="calendar-check" class="mr-2 text-2xl"></i> Giorno 3: Domenica 7 - Arte, Follia e Mercatini
            </h2>
            <p class="text-lg mb-6 bg-white p-4 rounded-lg shadow-md border-l-4 border-accent">
                <span class="intro-accent">Intro:</span> Un mix tra la grandezza del centro (Duomo), il mercato eclettico (Naschmarkt) e il grandioso mercatino di Rathausplatz.
            </p>
            <div id="timeline-GIORNO3" class="relative mt-4"></div>
        </section>

        <section id="page-GIORNO4" class="tab-content">
            <h2 class="text-3xl font-bold mb-8 pb-2 border-b border-accent accent-color flex items-center">
                <i data-lucide="calendar-check" class="mr-2 text-2xl"></i> Giorno 4: Luned√¨ 8 - Ultimi Dettagli & Ritorno
            </h2>
            <p class="text-lg mb-6 bg-white p-4 rounded-lg shadow-md border-l-4 border-accent">
                <span class="intro-accent">Intro:</span> Ultimo giorno dedicato alla colazione in Konditorei e al transfer per l'aeroporto.
            </p>
            <div id="timeline-GIORNO4" class="relative mt-4"></div>
        </section>

        <section id="page-CIBO" class="tab-content">
            <h2 class="text-3xl font-bold mb-8 pb-2 border-b border-accent accent-color flex items-center">
                <i data-lucide="utensils" class="mr-2 text-2xl"></i> Delizie Culinarie di Vienna
            </h2>
            <div id="food-showcases" class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div id="showcase-piatti" class="food-showcase p-5 rounded-xl">
                    <h3 class="text-2xl font-bold accent-color mb-4">üçΩÔ∏è Piatti Tipici (Pranzi & Cene)</h3>
                </div>
                <div id="showcase-merende" class="food-showcase p-5 rounded-xl">
                    <h3 class="text-2xl font-bold accent-color mb-4">üç∞ Le Merende Reali (Dolci & Caf√©)</h3>
                </div>
                <div id="showcase-drink" class="food-showcase p-5 rounded-xl">
                    <h3 class="text-2xl font-bold accent-color mb-4">‚òï Drink (Caldi & Mercatino)</h3>
                </div>
            </div>
        </section>

        <section id="page-BUDGET" class="tab-content">
            <h2 class="text-3xl font-bold mb-8 pb-2 border-b border-accent accent-color flex items-center">
                <i data-lucide="wallet" class="mr-2 text-2xl"></i> Analisi Budget e Statistiche
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="md:col-span-1 bg-white p-6 rounded-xl shadow-xl border-l-4 border-accent">
                    <h3 class="text-xl font-bold accent-color mb-4">Riepilogo Totale</h3>
                    <p class="text-4xl font-extrabold" id="total-budget-display">‚Ç¨ XXX.XX</p>
                    <p class="text-sm mt-2 text-gray-600">Costo stimato per persona (esclusi voli).</p>
                    <div id="kpi-summary" class="mt-6 space-y-3 text-sm">
                    </div>
                </div>

                <div class="md:col-span-2 bg-white p-6 rounded-xl shadow-xl border-l-4 border-accent no-print">
                    <h3 class="text-xl font-bold accent-color mb-4">Ripartizione Costi (Grafico)</h3>
                    <div class="chart-container" style="height: 350px;">
                        <canvas id="budgetChart"></canvas>
                    </div>
                    <p class="text-center text-sm mt-4 italic text-gray-500">I costi sono stimati e arrotondati.</p>
                </div>
            </div>
        </section>

    </main>

    <script>
        // ===========================================
        // 1. DATI (Ricavati dai file CSV)
        // ===========================================
        
        // Dati Itinerario (Pianoviaggio Vienna v2 - Itinerario.csv)
        const rawItineraryData = [
            { giorno: "Giorno 1: Ven 5 - Arrivo, Arte & Concerto", ora: "04:00", attivita: "Bus Torino ‚Üí Malpensa", luogo: "Torino", note: "Logistica: Prenota il bus in anticipo (es. Flixbus/Sadem).", focus_raw: "Trasferimento iniziale. Viaggio lungo, ma economicamente efficiente. | Sveglia all'alba!" },
            { giorno: "Giorno 1: Ven 5 - Arrivo, Arte & Concerto", ora: "09:00 - 10:30", attivita: "Volo MXP ‚Üí VIE", luogo: "MXP / VIE", note: "Volo diretto Milano Malpensa ‚Üí Vienna-Schwechat.", focus_raw: "" },
            { giorno: "Giorno 1: Ven 5 - Arrivo, Arte & Concerto", ora: "11:00", attivita: "Trasferimento Aeroporto ‚Üí Hotel", luogo: "Flughafen Wien", note: "S7 da Flughafen Wien a Wien Praterstern (‚âà 28 min). Costo: Abbonamento 72h + supplemento aeroporto 2‚Ç¨.", focus_raw: "Il treno S-Bahn S7 √® la scelta pi√π economica e rapida (dopo il CAT). | Acquisto: Pass 72h + 2x Biglietti supplemento aeroporto." },
            { giorno: "Giorno 1: Ven 5 - Arrivo, Arte & Concerto", ora: "11:45", attivita: "Check-in/Deposito Bagagli", luogo: "Deluxe Living, Gro√üe Stadtgutgasse 02, Leopoldstadt (1020).", note: "L'hotel √® a 5 minuti a piedi da Praterstern.", focus_raw: "Lascia i bagagli e inizia subito l'esplorazione." },
            { giorno: "Giorno 1: Ven 5 - Arrivo, Arte & Concerto", ora: "12:15", attivita: "Pranzo e Hundertwasserhaus", luogo: "Hundertwasser Village", note: "Cibo di strada o W√ºrstel, vicino al quartiere Hundertwasser. K√§sekrainer suggerito.", focus_raw: "Il quartiere √® un'oasi di design. √à vicino all'hotel." },
            { giorno: "Giorno 1: Ven 5 - Arrivo, Arte & Concerto", ora: "13:30", attivita: "Hundertwasserhaus e Kunst Haus Wien", luogo: "Kunst Haus Wien", note: "Non si pu√≤ entrare nella Hundertwasserhaus, ma si visita la Kunst Haus (museo). Costo: 12‚Ç¨ (Hundertwasser) / 11‚Ç¨ (Museum).", focus_raw: "Museo di Friedensreich Hundertwasser, un ribelle del design." },
            { giorno: "Giorno 1: Ven 5 - Arrivo, Arte & Concerto", ora: "15:00", attivita: "Hofburg Palace e Museo di Sissi", luogo: "Hofburg, 1010 Wien", note: "Visita del complesso imperiale. Sfrutta il Vienna Pass o il biglietto combinato. Costo: ‚âà 22‚Ç¨ (Adulto).", focus_raw: "Il centro nevralgico dell'Impero Asburgico per oltre 600 anni." },
            { giorno: "Giorno 1: Ven 5 - Arrivo, Arte & Concerto", ora: "17:30", attivita: "Biblioteca Nazionale Austriaca (Sala di Stato)", luogo: "Hofburg, 1010 Wien", note: "La pi√π grande biblioteca barocca d'Europa. Imperdibile per l'architettura. Costo: ‚âà 10‚Ç¨.", focus_raw: "FOCUS FOTO: I globi celesti e gli affreschi sul soffitto." },
            { giorno: "Giorno 1: Ven 5 - Arrivo, Arte & Concerto", ora: "18:30", attivita: "Pausa Calda e Mercatino Maria-Theresien Platz", luogo: "Maria-Theresien Platz, 1010 Wien", note: "Un Gl√ºhwein o Punsch per riscaldarsi tra i due grandi musei.", focus_raw: "Mercatino scenografico tra il Kunsthistorisches e il Naturhistorisches Museum." },
            { giorno: "Giorno 1: Ven 5 - Arrivo, Arte & Concerto", ora: "20:30", attivita: "Cena e Concerto (Opzionale)", luogo: "Beisl Tradizionale / Chiesa St. Peter", note: "Schnitzel di maiale (Schwein) per restare nel budget. Dopo, concerto di musica classica (opzionale).", focus_raw: "FOCUS CULTURALE: Concerto St. Peter (se prenotato) o semplicemente relax post-cena." },

            { giorno: "Giorno 2: Sab 6 - Grand Tour di Sfarzo", ora: "10:00", attivita: "Castello di Sch√∂nbrunn", luogo: "Sch√∂nbrunn Palace, 1130 Wien", note: "Visita del 'Grand Tour' (40 stanze) e dei giardini. Durata: 4h. Costo: ‚âà 22‚Ç¨.", focus_raw: "Residenza estiva degli Asburgo e il luogo preferito di Sissi." },
            { giorno: "Giorno 2: Sab 6 - Grand Tour di Sfarzo", ora: "14:00", attivita: "Pranzo al Mercatino di Sch√∂nbrunn", luogo: "Mercatino di Sch√∂nbrunn", note: "Pranzo veloce: K√§sekrainer o Schupfnudeln dal mercatino. Costo: ‚âà 10-15‚Ç¨.", focus_raw: "FOCUS CULINARIO: Prova i dolci o le patate fritte. √à una buona pausa pranzo a tema." },
            { giorno: "Giorno 2: Sab 6 - Grand Tour di Sfarzo", ora: "15:30", attivita: "Castello del Belvedere (Superiore)", luogo: "Belvedere, 1030 Wien", note: "Visita del museo per ammirare 'Il Bacio' di Gustav Klimt. T.T. = 2.5h. Costo: ‚âà 24‚Ç¨.", focus_raw: "Il capolavoro barocco del Principe Eugenio di Savoia e tempio dell'Art Nouveau." },
            { giorno: "Giorno 2: Sab 6 - Grand Tour di Sfarzo", ora: "18:00", attivita: "Mercatino di Karlsplatz (Artigianato)", luogo: "Karlsplatz, 1040 Wien", note: "Mercatino meno commerciale, focalizzato sull'artigianato e l'arte. Ideale per un acquisto unico.", focus_raw: "FOCUS: Prodotti unici e design. Perfetto per un regalo." },
            { giorno: "Giorno 2: Sab 6 - Grand Tour di Sfarzo", ora: "20:00", attivita: "Cena: Schnitzel o Gulasch", luogo: "Bierhof (per birra e cucina tradizionale) o Anzengruber (per Gulasch).", note: "Cena ricca, magari con una birra scura viennese.", focus_raw: "Cena in zona centrale ma fuori dal circuito turistico (zona 4 o 7)." },

            { giorno: "Giorno 3: Dom 7 - Arte, Follia e Mercatini", ora: "10:00", attivita: "St. Peter's Church (Chiesa di S. Pietro)", luogo: "Petersplatz 1, 1010 Wien", note: "Una delle chiese pi√π belle di Vienna in stile Barocco (molto vicina al Duomo).", focus_raw: "FOCUS FOTO: Interni dorati e la cupola affrescata." },
            { giorno: "Giorno 3: Dom 7 - Arte, Follia e Mercatini", ora: "11:30", attivita: "Duomo di Santo Stefano (Stephansdom)", luogo: "Stephansplatz, 1010 Wien", note: "Il simbolo gotico di Vienna. Visita alla Cattedrale (interni e tetto). Costo: ‚âà 6‚Ç¨ (Cattedrale) + ‚âà 6‚Ç¨ (Torre Sud).", focus_raw: "La torre sud offre una vista panoramica sul centro." },
            { giorno: "Giorno 3: Dom 7 - Arte, Follia e Mercatini", ora: "13:00", attivita: "Pranzo: Naschmarkt (Street Food)", luogo: "Naschmarkt, 1060 Wien", note: "Pranzo veloce ed eclettico. K√§sekrainer o cibo internazionale (es. orientale). Costo: ‚âà 8-12‚Ç¨.", focus_raw: "Mercato vivace. L'opzione 'Balkan Grill' per un Bosna (hot dog speziato) √® un must." },
            { giorno: "Giorno 3: Dom 7 - Arte, Follia e Mercatini", ora: "14:30", attivita: "Albertina Museum (Opzionale)", luogo: "Albertinaplatz 1, 1010 Wien", note: "Visita della collezione grafica di D√ºrer e Klimt. Ideale per gli amanti dell'arte. Costo: ‚âà 18‚Ç¨.", focus_raw: "La rampa di accesso offre una vista sulla Staatsoper (Opera di Stato)." },
            { giorno: "Giorno 3: Dom 7 - Arte, Follia e Mercatini", ora: "16:30", attivita: "Mercatini di Natale (Rathausplatz)", luogo: "Rathausplatz, 1010 Wien", note: "Il mercatino pi√π grande, con il maestoso Municipio illuminato.", focus_raw: "FOCUS FOTO: Il Municipio illuminato e l'atmosfera pi√π vivace." },
            { giorno: "Giorno 3: Dom 7 - Arte, Follia e Mercatini", ora: "18:30", attivita: "Furniture Museum Vienna (Opzionale)", luogo: "Museumstra√üe 6/8, 1070 Wien", note: "(Opzionale, se l'energia lo consente) Collezione imperiale di mobili. Metro U3 da Volkstheater (o vicino Rathaus) a Westbahnhof. Costo: $9‚Ç¨$.", focus_raw: "NOTA: Tappa da inserire solo se non siete troppo stanchi." },
            { giorno: "Giorno 3: Dom 7 - Arte, Follia e Mercatini", ora: "20:00", attivita: "Cena di Arrivederci (Autentica)", luogo: "Zona 7 o 8", note: "Beisl autentico (es. zona 7 o 8) per Kn√∂del (canederli) o Gulaschsuppe (zuppa).", focus_raw: "FOCUS CULINARIO: Riscaldarsi con una zuppa." },

            { giorno: "Giorno 4: Lun 8 - Ultimi Dettagli & Ritorno", ora: "09:00", attivita: "Colazione e Ultimo T√®", luogo: "Hotel/Konditorei", note: "Ultimo Kaffee und Kuchen o Sachertorte al volo.", focus_raw: "Preparare i bagagli e chiudere la camera." },
            { giorno: "Giorno 4: Lun 8 - Ultimi Dettagli & Ritorno", ora: "10:00", attivita: "Tempo Libero / Ultima Passeggiata", luogo: "Quartiere (Leopoldstadt)", note: "Ultima passeggiata nel quartiere o visita veloce (es. Minoritenkirche).", focus_raw: "" },
            { giorno: "Giorno 4: Lun 8 - Ultimi Dettagli & Ritorno", ora: "11:30", attivita: "Check-out e Spostamento in Aeroporto", luogo: "Hotel ‚Üí Aeroporto", note: "Transfer S7 o Railjet/CAT per VIE.", focus_raw: "Assicurarsi di avere il supplemento aeroporto (2‚Ç¨) se si usa l'abbonamento 72h." }
        ];

        // Dati Cibo (Pianoviaggio Vienna v2 - Cibo.csv)
        const newFoodData = {
            "Piatti tipici": [
                { titolo: "K√§sekrainer / W√ºrstel", descrizione: "Il re dello street food viennese. Salsiccia di maiale affumicata ripiena di formaggio fuso. Veloce, caldo e low-cost.", indirizzi: "Bitzinger W√ºrstelstand (vicino Praterstern). Perfetto per un pranzo veloce o spuntino. Costo: ‚âà